import os
from PIL import Image
import pytesseract

# Tesseract ì‹¤í–‰ íŒŒì¼ ê²½ë¡œ ì„¤ì • (Windowsë¼ë©´ í•„ìš”í•  ìˆ˜ ìˆìŒ)
# ì˜ˆì‹œ (Cë“œë¼ì´ë¸Œ ê¸°ì¤€):
# pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'

# ğŸ”§ ìˆ˜ì • í¬ì¸íŠ¸
IMAGE_DIR = 'images/episode_1'

# ê²°ê³¼ ì €ì¥ìš© ë¦¬ìŠ¤íŠ¸
results = []

# ì´ë¯¸ì§€ í´ë” ë‚´ íŒŒì¼ ë¦¬ìŠ¤íŠ¸
for filename in sorted(os.listdir(IMAGE_DIR)):
    if filename.endswith(('.jpg', '.png', '.webp')):
        filepath = os.path.join(IMAGE_DIR, filename)
        print(f'ğŸ–¼ï¸ ì²˜ë¦¬ ì¤‘: {filename}')
        
        # ì´ë¯¸ì§€ ì—´ê¸°
        img = Image.open(filepath)

        # OCRë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (í•œêµ­ì–´ ì„¤ì •)
        text = pytesseract.image_to_string(img, lang='kor')

        # ê²°ê³¼ ì €ì¥
        results.append({'filename': filename, 'text': text.strip()})

# ê²°ê³¼ ì¶œë ¥
for r in results:
    print(f"\nğŸ“ {r['filename']}\n{r['text']}")
